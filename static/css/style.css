/* NGMS — Dark Minimalist UI */

:root {
    --bg: #0d0d0f;
    --bg-alt: #141416;
    --surface: #1c1c1e;
    --surface-hover: #2c2c2e;
    --surface-active: #3a3a3c;
    --border: #38383a;
    --border-light: #2c2c2e;
    --text: #f5f5f7;
    --text-secondary: #8e8e93;
    --text-tertiary: #636366;
    --accent: #0a84ff;
    --accent-hover: #409cff;
    --accent-dim: rgba(10,132,255,.15);
    --green: #30d158;
    --green-dim: rgba(48,209,88,.12);
    --red: #ff453a;
    --red-dim: rgba(255,69,58,.12);
    --orange: #ff9f0a;
    --orange-dim: rgba(255,159,10,.12);
    --purple: #bf5af2;
    --purple-dim: rgba(191,90,242,.12);
    --yellow: #ffd60a;
    --radius: 12px;
    --radius-sm: 8px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --shadow: 0 2px 12px rgba(0,0,0,.5);
    --shadow-lg: 0 8px 32px rgba(0,0,0,.6);
    --sidebar-w: 240px;
    --sidebar-cw: 64px;
    --bnav-h: 60px;
    --t: .2s ease;
    --t-sidebar: .3s cubic-bezier(.4,0,.2,1);
}

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

body {
    font-family: -apple-system,'SF Pro Display','SF Pro Text','Inter','Helvetica Neue',Arial,sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    line-height: 1.5;
    font-size: 14px;
    -webkit-font-smoothing: antialiased;
}
a{color:inherit;text-decoration:none}

/* ── Sidebar ── */
.sidebar {
    position:fixed;left:0;top:0;
    width:var(--sidebar-w);height:100vh;
    background:var(--surface);
    border-right:1px solid var(--border-light);
    z-index:100;display:flex;flex-direction:column;
    transition:width var(--t-sidebar);overflow:hidden;
}
.sidebar-header {
    display:flex;align-items:center;justify-content:space-between;
    padding:14px 16px;height:52px;flex-shrink:0;
}
.sidebar-logo {
    font-size:17px;font-weight:700;letter-spacing:-.5px;
    color:var(--accent);white-space:nowrap;overflow:hidden;
    transition:opacity var(--t);
}
.collapse-btn {
    display:flex;align-items:center;justify-content:center;
    width:26px;height:26px;background:none;border:none;
    color:var(--text-tertiary);cursor:pointer;border-radius:6px;flex-shrink:0;
    transition:all var(--t);
}
.collapse-btn:hover{color:var(--text);background:var(--surface-hover)}
.collapse-btn svg{width:16px;height:16px}
.collapse-icon{display:flex;transition:transform var(--t-sidebar)}

.sidebar-nav{flex:1;padding:4px 8px;overflow-y:auto;overflow-x:hidden}

.nav-item {
    display:flex;align-items:center;gap:12px;
    padding:8px 12px;margin:1px 0;border-radius:var(--radius-sm);
    color:var(--text-secondary);font-size:13px;font-weight:500;
    white-space:nowrap;transition:all var(--t);cursor:pointer;
}
.nav-item:hover{color:var(--text);background:var(--surface-hover)}
.nav-item.active{color:var(--accent);background:var(--accent-dim)}

.nav-icon{display:flex;align-items:center;justify-content:center;width:20px;height:20px;flex-shrink:0}
.nav-icon svg{width:20px;height:20px}
.nav-label{overflow:hidden;transition:opacity var(--t-sidebar),width var(--t-sidebar)}

.sidebar-footer{padding:8px;border-top:1px solid var(--border-light);flex-shrink:0}

/* Sidebar collapsed */
html.collapsed .sidebar{width:var(--sidebar-cw)}
html.collapsed .sidebar-logo{opacity:0;width:0}
html.collapsed .nav-label{opacity:0;width:0}
html.collapsed .collapse-icon{transform:rotate(180deg)}
html.collapsed .sidebar-header{justify-content:center;padding:14px 0}
html.collapsed .nav-item{justify-content:center;padding:10px}
html.collapsed .sidebar-nav{padding:4px 6px}
html.collapsed .sidebar-footer .nav-item{justify-content:center}

/* Collapsed tooltips */
html.collapsed .nav-item{position:relative}
html.collapsed .nav-item[data-tip]::after {
    content:attr(data-tip);position:absolute;
    left:calc(100% + 10px);top:50%;transform:translateY(-50%);
    background:var(--text);color:var(--bg);padding:4px 10px;
    border-radius:6px;font-size:11px;font-weight:500;white-space:nowrap;
    opacity:0;pointer-events:none;transition:opacity .15s;z-index:200;
}
html.collapsed .nav-item[data-tip]:hover::after{opacity:1}

/* ── Bottom Nav (mobile) ── */
.bottom-nav {
    display:none;position:fixed;bottom:0;left:0;right:0;
    height:var(--bnav-h);background:var(--surface);
    border-top:1px solid var(--border-light);z-index:100;
    align-items:center;justify-content:space-around;padding:0 2px;
    padding-bottom:env(safe-area-inset-bottom);
}
.bnav-item {
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    gap:2px;padding:4px 0;flex:1;color:var(--text-tertiary);
    font-size:10px;font-weight:500;cursor:pointer;
    transition:color var(--t);-webkit-tap-highlight-color:transparent;
}
.bnav-item svg{width:22px;height:22px}
.bnav-item.active{color:var(--accent)}

.bnav-fab {
    display:flex;align-items:center;justify-content:center;
    width:46px;height:46px;background:var(--accent);border-radius:50%;
    margin-top:-20px;box-shadow:0 4px 16px rgba(10,132,255,.4);
    color:#fff;flex-shrink:0;transition:all var(--t);
    -webkit-tap-highlight-color:transparent;
}
.bnav-fab svg{width:22px;height:22px}
.bnav-fab:active{transform:scale(.9)}

/* ── More Menu ── */
.more-menu{display:none;position:fixed;inset:0;z-index:200}
.more-menu.active{display:block}
.more-overlay{position:absolute;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}
.more-sheet {
    position:absolute;bottom:0;left:0;right:0;
    background:var(--surface);border-radius:var(--radius-xl) var(--radius-xl) 0 0;
    padding:12px 16px;padding-bottom:calc(16px + env(safe-area-inset-bottom));
    animation:sheetUp .25s ease;
}
@keyframes sheetUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.more-handle{width:36px;height:4px;background:var(--text-tertiary);border-radius:2px;margin:0 auto 16px}
.more-item {
    display:flex;align-items:center;gap:14px;padding:12px;
    border-radius:var(--radius-sm);color:var(--text);font-size:15px;
    font-weight:500;transition:background var(--t);cursor:pointer;
}
.more-item:active{background:var(--surface-hover)}
.more-item.active{color:var(--accent)}
.more-item-danger{color:var(--red)}
.more-icon{display:flex;width:22px;height:22px}
.more-icon svg{width:22px;height:22px}
.more-divider{height:1px;background:var(--border-light);margin:8px 0}

/* ── Main ── */
.main-content {
    margin-left:var(--sidebar-w);padding:24px;
    min-height:100vh;transition:margin var(--t-sidebar);
}
html.collapsed .main-content{margin-left:var(--sidebar-cw)}

/* ── Page Header ── */
.page-header{display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:20px;flex-wrap:wrap;gap:12px}
.page-title{font-size:22px;font-weight:700;letter-spacing:-.3px}
.page-subtitle{font-size:12px;color:var(--text-secondary);margin-top:2px}

/* ── Cards ── */
.card{background:var(--surface);border-radius:var(--radius);border:1px solid var(--border-light);overflow:hidden}
.card-header{padding:12px 16px;border-bottom:1px solid var(--border-light);display:flex;justify-content:space-between;align-items:center;gap:8px}
.card-title{font-size:12px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.4px}
.card-body{padding:16px}

/* ── Stat Cards ── */
.stat-card{background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius);padding:14px 16px}
.stat-value{font-size:20px;font-weight:700;letter-spacing:-.3px;margin:2px 0 1px}
.stat-label{font-size:11px;color:var(--text-secondary);font-weight:600;text-transform:uppercase;letter-spacing:.4px}
.stat-sub{font-size:11px;color:var(--text-tertiary);margin-top:2px}

.stat-card.accent-green{border-left:3px solid var(--green)}
.stat-card.accent-blue{border-left:3px solid var(--accent)}
.stat-card.accent-purple{border-left:3px solid var(--purple)}
.stat-card.accent-orange{border-left:3px solid var(--orange)}
.stat-card.accent-red{border-left:3px solid var(--red)}

/* compat */
.stat-card.gradient-green{border-left:3px solid var(--green)}
.stat-card.gradient-blue{border-left:3px solid var(--accent)}
.stat-card.gradient-purple{border-left:3px solid var(--purple)}
.stat-card.gradient-orange{border-left:3px solid var(--orange)}
.stat-icon{font-size:24px;opacity:.4}

/* ── Buttons ── */
.btn {
    display:inline-flex;align-items:center;justify-content:center;gap:6px;
    padding:8px 16px;border-radius:var(--radius-sm);font-weight:500;font-size:13px;
    cursor:pointer;border:none;text-decoration:none;transition:all var(--t);
    line-height:1.4;white-space:nowrap;
}
.btn-primary{background:var(--accent);color:#fff}
.btn-primary:hover{background:var(--accent-hover)}
.btn-secondary{background:var(--surface-hover);color:var(--text)}
.btn-secondary:hover{background:var(--surface-active)}
.btn-danger{background:var(--red);color:#fff}
.btn-outline{background:transparent;border:1px solid var(--border);color:var(--text-secondary)}
.btn-outline:hover{border-color:var(--text-tertiary);color:var(--text)}
.btn-ghost{background:transparent;color:var(--text-secondary)}
.btn-ghost:hover{color:var(--text);background:var(--surface-hover)}
.btn-sm{padding:5px 10px;font-size:12px}
.btn-lg{padding:12px 24px;font-size:15px}

/* ── Forms ── */
.form-group{margin-bottom:12px}
.form-label{display:block;font-weight:500;font-size:11px;color:var(--text-secondary);margin-bottom:4px;text-transform:uppercase;letter-spacing:.3px}
.form-input,.form-select {
    width:100%;padding:8px 12px;border:1px solid var(--border);
    border-radius:var(--radius-sm);font-size:14px;
    background:var(--bg);color:var(--text);
    transition:border-color var(--t),box-shadow var(--t);outline:none;
}
.form-input:focus,.form-select:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.form-input::placeholder{color:var(--text-tertiary)}
.form-select {
    cursor:pointer;appearance:none;
    background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23636366'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
    background-repeat:no-repeat;background-position:right 8px center;background-size:16px;padding-right:32px;
}

/* ── Grid ── */
.grid{display:grid;gap:12px}
.grid-2{grid-template-columns:repeat(2,1fr)}
.grid-3{grid-template-columns:repeat(3,1fr)}
.grid-4{grid-template-columns:repeat(4,1fr)}
.grid-6{grid-template-columns:repeat(6,1fr)}

/* ── Tables ── */
.table-container{overflow-x:auto}
.table{width:100%;border-collapse:collapse}
.table th{padding:8px 12px;text-align:left;font-size:10px;font-weight:600;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.5px;background:var(--bg-alt);border-bottom:1px solid var(--border-light)}
.table td{padding:10px 12px;font-size:13px;border-bottom:1px solid var(--border-light);color:var(--text-secondary)}
.table tr:last-child td{border-bottom:none}
.table tr:hover td{background:rgba(255,255,255,.02)}
.table td strong{color:var(--text)}

/* ── Badges ── */
.badge{display:inline-flex;align-items:center;padding:2px 8px;border-radius:20px;font-size:11px;font-weight:600}
.badge-success{background:var(--green-dim);color:var(--green)}
.badge-warning{background:var(--orange-dim);color:var(--orange)}
.badge-danger{background:var(--red-dim);color:var(--red)}
.badge-info{background:var(--accent-dim);color:var(--accent)}

/* ── Modal ── */
.modal{display:none;position:fixed;inset:0;z-index:200;align-items:center;justify-content:center;padding:16px}
.modal.active{display:flex}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}
.modal-content{position:relative;background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-lg);width:100%;max-width:520px;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-lg);animation:modalIn .2s ease}
@keyframes modalIn{from{opacity:0;transform:scale(.96) translateY(-8px)}to{opacity:1;transform:scale(1) translateY(0)}}
.modal-header{padding:14px 16px;border-bottom:1px solid var(--border-light);display:flex;justify-content:space-between;align-items:center}
.modal-title{font-size:15px;font-weight:600}
.modal-close{display:flex;align-items:center;justify-content:center;background:none;border:none;font-size:20px;cursor:pointer;color:var(--text-tertiary);width:28px;height:28px;border-radius:50%;transition:all var(--t)}
.modal-close:hover{background:var(--surface-hover);color:var(--text)}
.modal-body{padding:16px}
.modal-footer{padding:12px 16px;border-top:1px solid var(--border-light);display:flex;justify-content:flex-end;gap:8px}

/* ── Toast ── */
.toast{position:fixed;bottom:80px;right:20px;padding:10px 16px;background:var(--surface-active);color:var(--text);border-radius:var(--radius);font-size:13px;font-weight:500;box-shadow:var(--shadow-lg);z-index:300;animation:toastIn .3s ease;border:1px solid var(--border)}
.toast-success{border-left:3px solid var(--green)}
.toast-error{border-left:3px solid var(--red)}
@keyframes toastIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* ── Spinner ── */
.spinner{width:22px;height:22px;border:2px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* ── Empty ── */
.empty-state{text-align:center;padding:28px 16px;color:var(--text-tertiary)}
.empty-state-icon{font-size:36px;margin-bottom:8px;opacity:.3}
.empty-state-title{font-size:14px;font-weight:600;color:var(--text-secondary);margin-bottom:4px}

/* ── Actions ── */
.action-btn{padding:4px;border:none;background:none;cursor:pointer;border-radius:6px;transition:background var(--t);font-size:14px;color:var(--text-secondary)}
.action-btn:hover{background:var(--surface-hover)}

/* ── FAB ── */
.fab{position:fixed;bottom:24px;right:24px;width:48px;height:48px;background:var(--accent);border:none;border-radius:50%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 20px rgba(10,132,255,.4);z-index:50;transition:all var(--t)}
.fab:hover{transform:scale(1.06);box-shadow:0 6px 28px rgba(10,132,255,.5)}
.fab svg{width:22px;height:22px}

/* ── Map ── */
#map,#customersMap{height:500px;width:100%;border-radius:var(--radius)}

/* ── Utilities ── */
.flex{display:flex}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}
.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}
.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}
.text-center{text-align:center}.text-success{color:var(--green)}.text-danger{color:var(--red)}.text-gray{color:var(--text-secondary)}
.font-bold{font-weight:700}.font-mono{font-family:'SF Mono','Menlo',monospace}
.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mb-6{margin-bottom:24px}
.mt-2{margin-top:8px}.mt-4{margin-top:16px}.p-4{padding:16px}
.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

/* ── Scrollbar ── */
::-webkit-scrollbar{width:5px;height:5px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--text-tertiary)}

/* ── Responsive ── */
@media(max-width:1024px){
    .grid-4{grid-template-columns:repeat(2,1fr)}
    .grid-3{grid-template-columns:repeat(2,1fr)}
    .grid-6{grid-template-columns:repeat(3,1fr)}
}
@media(max-width:768px){
    .sidebar{display:none!important}
    .bottom-nav{display:flex}
    .main-content,.collapsed .main-content{margin-left:0!important;padding:16px;padding-bottom:calc(var(--bnav-h) + 16px + env(safe-area-inset-bottom))}
    .page-title{font-size:18px}
    .grid-2,.grid-3,.grid-4,.grid-6{grid-template-columns:1fr}
    .page-header{flex-direction:column;align-items:stretch;gap:8px}
    .stat-value{font-size:16px}
    .modal-content{margin:8px;max-width:100%}
    .card-body{padding:12px}
    .table th,.table td{padding:8px;font-size:12px}
    .fab{bottom:calc(var(--bnav-h) + 16px + env(safe-area-inset-bottom))}
    .toast{bottom:calc(var(--bnav-h) + 12px + env(safe-area-inset-bottom));left:16px;right:16px}
}
@media(max-width:480px){
    .grid-2{grid-template-columns:1fr}
    .stat-card{padding:12px}
    .stat-value{font-size:15px}
}
@media print{
    .sidebar,.bottom-nav,.more-menu,.btn,.modal,.fab{display:none!important}
    .main-content{margin-left:0!important}
}
